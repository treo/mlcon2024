import{w as P}from"./index.31815045.js";import{ak as h}from"./index.6e58b9bb.js";function S(){const{subscribe:e,set:t,update:r}=P([]);return{subscribe:e,set:t,update:r,trigger:s=>r(o=>(o.push(s),o)),close:()=>r(s=>(s.length>0&&s.shift(),s)),clear:()=>t([])}}const m=S(),i={};function w(e){return e==="local"?localStorage:sessionStorage}function f(e,t,r){const s=(r==null?void 0:r.serializer)??JSON,o=(r==null?void 0:r.storage)??"local";function u(c,l){w(o).setItem(c,s.stringify(l))}if(!i[e]){const c=P(t,n=>{const a=w(o).getItem(e);a&&n(s.parse(a));{const p=d=>{d.key===e&&n(d.newValue?s.parse(d.newValue):null)};return window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)}}),{subscribe:l,set:g}=c;i[e]={set(n){u(e,n),g(n)},update(n){const a=n(h(c));u(e,a),g(a)},subscribe:l}}return i[e]}const b=f("modeOsPrefers",!1),y=f("modeUserPrefers",void 0),M=f("modeCurrent",!1);function _(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return b.set(e),e}function v(e){y.set(e)}function C(e){const t=document.documentElement.classList,r="dark";e===!0?t.remove(r):t.add(r),M.set(e)}function E(){const e=document.documentElement.classList,t=localStorage.getItem("modeUserPrefers")==="false",r=!("modeUserPrefers"in localStorage),s=window.matchMedia("(prefers-color-scheme: dark)").matches;t||r&&s?e.add("dark"):e.remove("dark")}async function j(e){return new Promise((t,r)=>{m.trigger({type:"alert",body:e,response:s=>{t(s)}})})}async function I(e){return new Promise((t,r)=>{m.trigger({type:"confirm",body:e,response:s=>{t(s)}})})}async function O(e,t){return new Promise((r,s)=>{m.trigger({type:"prompt",body:e,value:t,response:o=>{r(o)}})})}export{M as a,C as b,v as c,j as d,I as e,_ as g,m,O as p,E as s};
